<div class="fixed inset-0 bg-black/50 z-40" (click)="cancel()"></div>
<div class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white rounded-xl shadow-2xl z-50 w-full max-w-md">
  <div class="p-6 border-b">
    <h2 class="text-xl font-bold text-slate-800">AI Model Selection</h2>
    <p class="text-sm text-slate-500 mt-1">Choose a free AI model from OpenRouter to power the app.</p>
  </div>
  <div class="p-6 space-y-6">
    <div>
      <label for="modelSelect" class="block text-sm font-medium text-slate-700 mb-1">AI Model</label>
      <select 
        id="modelSelect"
        [ngModel]="selectedModelId()"
        (ngModelChange)="selectedModelId.set($event)"
        class="w-full p-2 border border-slate-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition bg-white">
        @for(model of availableModels; track model.id) {
          <option [value]="model.id">
            {{ model.name }} ({{ model.provider }})
            @if(model.isFree) {
              <span> - Free</span>
            }
          </option>
        }
      </select>
    </div>
    <div class="text-center text-sm text-slate-500">
      <a href="https://openrouter.ai" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">
        Models provided by OpenRouter
      </a>
    </div>
  </div>
  <div class="bg-slate-50 p-4 flex justify-end items-center space-x-3 rounded-b-xl">
    <button (click)="cancel()" class="px-4 py-2 rounded-md text-sm font-medium text-slate-700 bg-white border border-slate-300 hover:bg-slate-50 transition-colors">
      Cancel
    </button>
    <button (click)="save()" class="px-4 py-2 rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition-colors">
      Save Settings
    </button>
  </div>
</div>